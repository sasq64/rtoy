
module Shortcuts
    @@display = Display.default

    extend MethAttrs

    doc! "Create a Vec2"
    def vec2(x,y)
        Vec2.new(x,y)
    end

    doc! "Returns the default display"
    returns! Display
    def display() @@display end

    doc! "Returns the default console layer"
    returns! Console
    def console() @@display.console end

    doc! "Returns the default canvas layer"
    returns! Canvas
    def canvas() @@display.canvas end

    doc! "Returns the default sprites layer"
    returns! Sprites
    def sprites() @@display.sprites end

    doc! "Returns the default Audio instance"
    returns! Audio
    def audio() Audio.default end

    doc! "Returns the default Speech instance"
    returns! Speech
    def speech() Speech.default end

    doc! "Use text to speech to vocalize the given text"
    def say(text)
        sound = Speech.default.text_to_sound(text)
        audio.play(sound)
    end

    doc! "Play a sound at default or given frequency"
    def play(sound, freq = nil)
        audio.play(sound)
    end

    doc! "Load an image (png)"
    returns! Image
    takes_file! 
    def load_image(*args) Image.from_file(*args) end

    doc! "Draw text at specific location with specific colors"
    def text(*args, **kwargs) 
        @@display.console.text(*args)
    end
    doc! "Get the character at x,y in the console"
    def get_char(x, y) @@display.console.get_char(x, y) end
    def scale(x, y = x) @@display.console.scale = [x,y] end
    def offset(x, y) @@display.console.offset(x,y) end
    
    doc! "Draw a line in the canvas from x,y to x2,y2"
    def line(x, y, x2, y2) @@display.canvas.line(x, y, x2, y2) end
    doc! "Draw a circle in the canvas at x,y with radius r"
    def circle(x, y, r, **kwargs)
        if kwargs.size
            style = Style.new
            kwargs.each { |a,b| style.send (a.to_s + '=').to_sym, b }
            @@display.canvas.circle(x, y, r, style)
        else
            @@display.canvas.circle(x, y, r)
        end
    end

    returns! Sprite
    doc! "Add a sprite to the screen"
    def add_sprite(img) @@display.sprites.add_sprite(img) end
    doc! "Remove a sprite"
    def remove_sprite(spr) @@display.sprites.remove_sprite(spr) end

    def clear()
        @@display.clear
    end
end
